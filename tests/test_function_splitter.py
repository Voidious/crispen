"""Tests for function_splitter: 100% branch coverage."""

from __future__ import annotations

import textwrap
from unittest.mock import MagicMock, patch

import libcst as cst
import pytest
from libcst.metadata import MetadataWrapper, PositionProvider

from crispen.refactors.function_splitter import (
    _ApiTimeout,
    _FuncInfo,
    _FunctionCollector,
    _SplitTask,
    _choose_best_split,
    _count_body_lines,
    _extract_func_source,
    _find_free_vars,
    _find_valid_splits,
    _func_in_changed_range,
    _generate_call,
    _generate_helper_source,
    _has_nested_funcdef,
    _has_new_undefined_names,
    _has_yield,
    _head_effective_lines,
    _is_docstring_stmt,
    _llm_name_helpers,
    _module_global_names,
    _run_with_timeout,
    _stmts_source,
    FunctionSplitter,
)


# ---------------------------------------------------------------------------
# Test helpers
# ---------------------------------------------------------------------------


# ---------------------------------------------------------------------------
# _is_docstring_stmt
# ---------------------------------------------------------------------------


# ---------------------------------------------------------------------------
# _count_body_lines
# ---------------------------------------------------------------------------


# ---------------------------------------------------------------------------
# _find_free_vars
# ---------------------------------------------------------------------------


# ---------------------------------------------------------------------------
# _stmts_source
# ---------------------------------------------------------------------------


# ---------------------------------------------------------------------------
# _head_effective_lines
# ---------------------------------------------------------------------------


# ---------------------------------------------------------------------------
# _find_valid_splits
# ---------------------------------------------------------------------------


# ---------------------------------------------------------------------------
# _choose_best_split
# ---------------------------------------------------------------------------


# ---------------------------------------------------------------------------
# _module_global_names
# ---------------------------------------------------------------------------


# ---------------------------------------------------------------------------
# _generate_helper_source
# ---------------------------------------------------------------------------


# ---------------------------------------------------------------------------
# _generate_call
# ---------------------------------------------------------------------------


# ---------------------------------------------------------------------------
# _has_yield
# ---------------------------------------------------------------------------


# ---------------------------------------------------------------------------
# _has_nested_funcdef
# ---------------------------------------------------------------------------


# ---------------------------------------------------------------------------
# _run_with_timeout
# ---------------------------------------------------------------------------


# ---------------------------------------------------------------------------
# _func_in_changed_range / _extract_func_source
# ---------------------------------------------------------------------------


# ---------------------------------------------------------------------------
# _FunctionCollector
# ---------------------------------------------------------------------------


# ---------------------------------------------------------------------------
# _llm_name_helpers
# ---------------------------------------------------------------------------


# ---------------------------------------------------------------------------
# FunctionSplitter — integration tests
# ---------------------------------------------------------------------------


# ---------------------------------------------------------------------------
# FunctionSplitter — additional branch coverage tests
# ---------------------------------------------------------------------------


# ---------------------------------------------------------------------------
# _has_new_undefined_names
# ---------------------------------------------------------------------------


# ---------------------------------------------------------------------------
# Engine integration: FunctionSplitter branch is exercised
# ---------------------------------------------------------------------------
